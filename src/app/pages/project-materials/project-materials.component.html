<app-sidebar></app-sidebar>
<div class="container">
  <div class="main-content">
    <div class="header">
      <h4>Project Materials Management</h4>
    </div>

    <button class="btn-add-materials" (click)="openModal()">
      <i class="fas fa-plus-circle"></i> Add Project
    </button>

    <!-- Modal -->
    <div class="modal-backdrop" [class.hidden]="!showModal">
      <div class="modal-content">
        <span class="close-btn" (click)="closeModal()">&times;</span>
        <h2 class="modal-title">Create New Project</h2>

        <label class="modal-label">Project Name:</label>
        <input type="text" class="input-field" placeholder="Enter project name" [(ngModel)]="project.name">

        <label class="modal-label">Project Description:</label>
        <textarea class="textarea-field" placeholder="Enter project description" [(ngModel)]="project.description"></textarea>
    <!-- end of modal -->
        <h6>Materials</h6>

        <!-- Scrollable Material List -->
        <div class="materials-container">
          <div *ngFor="let material of project.materials; let i = index" class="material-item">
            <input type="text" class="input-field" placeholder="Material name" [(ngModel)]="material.name">
            <input type="number" class="input-field" min="1" placeholder="Units" [(ngModel)]="material.units">
            <button class="remove-btn" (click)="removeMaterial(i)">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        <!-- end of Scrollable Material List -->

        <!-- Button Container -->
        <div class="modal-actions">
          <button class="action-btn add-material-btn" (click)="addMaterial()">
            <i class="fas fa-plus"></i> Add Material
          </button>&nbsp;&nbsp;&nbsp;&nbsp;

          <button class="action-btn save-btn" (click)="submitProject()">
            <i class="fas fa-save"></i> Save Project
          </button>
        </div>
      </div>
    </div>  
    <!-- end of button container -->

    <!-- Edit Project Modal -->
    <div class="modal-backdrop" [class.hidden]="!showEditModal">
      <div class="modal-content">
        <span class="close-btn" (click)="showEditModal = false">&times;</span>
        <h2 class="modal-title">Edit Project</h2>

        <label class="modal-label">Project Name:</label>
        <input type="text" class="input-field" placeholder="Enter project name">

        <label class="modal-label">Project Description:</label>
        <textarea class="textarea-field" placeholder="Enter project description"></textarea>

        <h6>Materials</h6>
        <div class="materials-container">
          <div class="material-item">
            <input type="text" class="input-field" placeholder="Material name">
            <input type="number" class="input-field" min="1" placeholder="Units">
            <button class="remove-btn">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>

        <div class="modal-actions">
          <button class="action-btn add-material-btn">
            <i class="fas fa-plus"></i> Add Material
          </button>&nbsp;&nbsp;&nbsp;
          <button class="action-btn save-btn">
            <i class="fas fa-save"></i> Save Changes
          </button>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
<div class="modal-backdrop" [class.hidden]="!showDeleteModal">
  <div class="modal-content">
    <h2 class="modal-title">Confirm Deletion</h2>
    <p>Are you sure you want to delete this project?</p>
    <div class="delete-modal-actions">
      <button class="action-btn cancel-btn" (click)="showDeleteModal = false">No</button>
      <button class="action-btn delete-btn">Yes</button>
    </div>
  </div>
</div>


    <!-- project cards -->
    <div class="project-card-grid">
      <div class="project-card">
        <h3 class="project-title">Project Name 1</h3>
        <p class="project-description">This is a sample project description.</p>
        <p class="project-materials">
          <strong>Quantity:</strong> 2
        </p>
        <div class="project-actions">
          <button class="action-icon-btn"><i class="fas fa-eye"></i></button>
          <button class="action-icon-btn" (click)="showEditModal = true"><i class="fas fa-edit"></i></button>
          <button class="action-icon-btn" (click)="showDeleteModal = true"><i class="fas fa-trash"></i></button>
        </div>
      </div>
    </div>
  </div>
  <!-- end of project cards -->
</div>
